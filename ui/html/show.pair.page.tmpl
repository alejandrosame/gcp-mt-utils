{{template "base" .}}

{{define "title"}}Manage pairs - {{.Book.Name}} - Chapter {{.Book.Chapter}}{{end}}

{{define "body"}}
    <div>
        <div class="row mt-2 justify-content-center">
            <h2>Pairs for {{.Book.Name}} - Chapter {{.Book.Chapter}}</h2>
        </div>

        {{if .Pairs}}
            <div class="row mt-2">
                <div class="col mt-1">
                    <a class="btn btn-outline-light btn-sm btn-block" role="button"
                       href='/pair/book/{{.Book.ID}}/chapter/{{.Book.Chapter}}/validate'>
                        Validate training pairs
                    </a>
                </div>
                <div class="col mt-1">
                    <a class="btn btn-outline-light btn-sm btn-block" role="button"
                       href='/pairs/book/{{.Book.ID}}/chapter/{{.Book.Chapter}}/export'>
                        Export validated pairs to dataset
                    </a>
                </div>
                <div class="col mt-1">
                    <form action='/pairs/book/{{.Book.ID}}/chapter/{{.Book.Chapter}}/validate' method='POST'>
                        <input type='hidden' name='csrf_token' value='{{.CSRFToken}}'>
                        <button class="btn btn-outline-light btn-sm btn-block"
                                onclick="return confirm('Are you sure that you DO want to validate ALL the pairs in the chapter?');"
                        >Validate all pairs of this chapter</button>
                    </form>
                </div>
            </div>

            <div class="row">
                <div class="col mt-1 text-center">
                    {{with .ValidationStats}}
                        <div class="alert alert-info font-weight-bold">
                            Validated {{.Validated}} of {{.Total}} pairs ({{printf "%.2f" .Percent}}%)
                        </div>
                    {{end}}
                </div>
            </div>

            {{range .Pairs}}
            <div class="row mt-2">
                <div class="col">
                    {{template "pair" .}}
                </div>
            </div>
            {{end}}
        {{else}}
            <div class="row text-white">
                <p>There's nothing to see here... yet!</p>
            </div>
        {{end}}
    </div>
{{end}}
